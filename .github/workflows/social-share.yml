name: Social Media Share

on:
  release:
    types: [published]
  workflow_dispatch:
    inputs:
      message:
        description: 'Custom message to share'
        required: false
        default: 'ğŸ‰ Git æ•™ç¨‹é¡¹ç›®æ›´æ–°äº†ï¼å¿«æ¥å­¦ä¹ æœ€æ–°çš„ Git æŠ€å·§å§ï¼'

jobs:
  share:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout
      uses: actions/checkout@v4
      
    - name: Generate share content
      id: content
      run: |
        if [ "${{ github.event_name }}" == "release" ]; then
          MESSAGE="ğŸ‰ Git æ•™ç¨‹ ${{ github.event.release.tag_name }} å‘å¸ƒäº†ï¼
          
          âœ¨ æ–°å¢å†…å®¹ï¼š
          ${{ github.event.release.body }}
          
          ğŸ”— GitHub: https://github.com/${{ github.repository }}
          ğŸ“š åœ¨çº¿æ–‡æ¡£: https://${{ github.repository_owner }}.github.io/git-tutorial/
          
          #Git #æ•™ç¨‹ #å¼€æº #å­¦ä¹  #GitHub"
        else
          MESSAGE="${{ github.event.inputs.message }}
          
          ğŸ”— GitHub: https://github.com/${{ github.repository }}
          ğŸ“š åœ¨çº¿æ–‡æ¡£: https://${{ github.repository_owner }}.github.io/git-tutorial/
          
          #Git #æ•™ç¨‹ #å¼€æº #å­¦ä¹  #GitHub"
        fi
        echo "message<<EOF" >> $GITHUB_OUTPUT
        echo "$MESSAGE" >> $GITHUB_OUTPUT
        echo "EOF" >> $GITHUB_OUTPUT
      
    - name: Create shareable content file
      run: |
        cat > share-content.md << 'EOF'
        # åˆ†äº«å†…å®¹ Share Content
        
        ## ç¤¾äº¤åª’ä½“æ–‡æ¡ˆ
        
        ${{ steps.content.outputs.message }}
        
        ## æ¨èå¹³å°
        
        ### å¼€å‘è€…ç¤¾åŒº
        - [Dev.to](https://dev.to/)
        - [Hashnode](https://hashnode.com/)
        - [æ˜é‡‘](https://juejin.cn/)
        - [CSDN](https://blog.csdn.net/)
        - [åšå®¢å›­](https://www.cnblogs.com/)
        
        ### ç¤¾äº¤åª’ä½“
        - Twitter/X
        - LinkedIn
        - å¾®åš
        - çŸ¥ä¹
        
        ### æŠ€æœ¯è®ºå›
        - Stack Overflow
        - Reddit (r/git, r/programming)
        - V2EX
        - æ€å¦ SegmentFault
        
        ## åˆ†äº«é“¾æ¥
        
        - **GitHub**: https://github.com/${{ github.repository }}
        - **åœ¨çº¿æ–‡æ¡£**: https://${{ github.repository_owner }}.github.io/git-tutorial/
        - **é—®é¢˜åé¦ˆ**: https://github.com/${{ github.repository }}/issues
        - **è´¡çŒ®æŒ‡å—**: https://github.com/${{ github.repository }}/blob/main/CONTRIBUTING.md
        EOF
        
    - name: Upload share content
      uses: actions/upload-artifact@v4
      with:
        name: share-content
        path: share-content.md