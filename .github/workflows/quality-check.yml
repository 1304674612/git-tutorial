name: Documentation Quality Check

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  markdown-lint:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    
name: Documentation Quality Check

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  markdown-lint:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    
    - name: Setup Node.js
      uses: actions/setup-node@v6
      with:
        node-version: '18'
        
    - name: Install markdownlint
      run: npm install -g markdownlint-cli
        
    - name: Lint Markdown files
      run: |
        markdownlint --config .markdownlint.json docs/ resources/ exercises/ examples/ *.md || true
        
    - name: Check spelling
      uses: streetsidesoftware/cspell-action@v5
      with:
        files: '**/*.md'
        config: .cspell.json

  validate-structure:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    
    - name: Validate project structure
      run: |
        echo "检查必要的文件和目录..."
        
        # 检查必要目录
        dirs=("docs" "examples" "exercises" "resources")
        for dir in "${dirs[@]}"; do
          if [ ! -d "$dir" ]; then
            echo "❌ 缺少目录: $dir"
            exit 1
          else
            echo "✅ 目录存在: $dir"
          fi
        done
        
        # 检查必要文件
        files=("README.md" "LICENSE" ".gitignore")
        for file in "${files[@]}"; do
          if [ ! -f "$file" ]; then
            echo "❌ 缺少文件: $file"
            exit 1
          else
            echo "✅ 文件存在: $file"
          fi
        done
        
        echo "🎉 项目结构验证通过！"