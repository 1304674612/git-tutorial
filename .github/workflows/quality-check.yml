name: Documentation Quality Check

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  markdown-lint:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    
name: Documentation Quality Check

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  markdown-lint:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    
    - name: Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '18'
        
    - name: Install markdownlint
      run: npm install -g markdownlint-cli
        
    - name: Lint Markdown files
      run: |
        markdownlint --config .markdownlint.json docs/ resources/ exercises/ examples/ *.md || true
        
    - name: Check spelling
      uses: streetsidesoftware/cspell-action@v8
      with:
        files: '**/*.md'
        config: .cspell.json

  validate-structure:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    
    - name: Validate project structure
      run: |
        echo "æ£€æŸ¥å¿…è¦çš„æ–‡ä»¶å’Œç›®å½•..."
        
        # æ£€æŸ¥å¿…è¦ç›®å½•
        dirs=("docs" "examples" "exercises" "resources")
        for dir in "${dirs[@]}"; do
          if [ ! -d "$dir" ]; then
            echo "âŒ ç¼ºå°‘ç›®å½•: $dir"
            exit 1
          else
            echo "âœ… ç›®å½•å­˜åœ¨: $dir"
          fi
        done
        
        # æ£€æŸ¥å¿…è¦æ–‡ä»¶
        files=("README.md" "LICENSE" ".gitignore")
        for file in "${files[@]}"; do
          if [ ! -f "$file" ]; then
            echo "âŒ ç¼ºå°‘æ–‡ä»¶: $file"
            exit 1
          else
            echo "âœ… æ–‡ä»¶å­˜åœ¨: $file"
          fi
        done
        
        echo "ğŸ‰ é¡¹ç›®ç»“æ„éªŒè¯é€šè¿‡ï¼"